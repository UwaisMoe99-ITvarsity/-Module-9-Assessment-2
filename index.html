<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="styles.css">
    
    <title>World Clock</title>
</head>
<body>
    <div id="output"></div>

    <script>
        var time = setInterval(displayWorldTime, 1000);

        var cities = [
            {name: "Istumbul", utcOffset:3, flag: "Turkey.png" },
            {name: "New York City",  utcOffset: -5, flag: "United-States-Of-America.png"},
            {name: "Tokyo", utcOffset: 9, flag: "Japan.png"},
            {name: "Moscow", utcOffset: 3, flag: "Russia.png"},
            {name: "Rio De Janeiro", utcOffset: -3, flag: "Brazil.png"},
            {name: "Sydney", utcOffset: 11, flag: "Australia.png"},
            {name: "Vancouver", utcOffset: -8, flag: "Canada.png"},
            {name: "Beijing", utcOffset: 8, flag: "China.png"},
            {name: "Norway", utcOffset: 1, flag: "Norway.png"},
            {name: "Indonesia", utcOffset: 7, flag: "Indonesia.png"},
            {name: "Switzerland", utcOffset: 1, flag: "Switzerland.png"},
            {name: "London", utcOffset: 0, flag: "United-Kingdom.png"},
            {name: "Azerbaijan", utcOffset: 4, flag: "Azerbaijan.png"}
        ];

        cities.sort(compare);
        console.log(getCurrentTime(cities[0].utcOffset));

        function compare(a, b){
            var cityA = a.name;
            var cityB = b.name;

            var comparison = 0;
            if (cityA > cityB){
                comparison = 1;
            } else if(cityA < cityB){
                comparison = -1;
            }
            return comparison;
        }

        function getUctTime(){
            var dt = new Date ();
            var utcOffset = dt.getTimezoneOffset() *60000;
            var utcTime = new Date(dt.getTime() + utcOffset);
            return utcTime.getTime();
        }
        
        function getCurrentTime(utcOffset){
            var mil = 1000 * 60 * 60;
            var time = new Date(getUctTime() + utcOffset * mil); 
            return time.toLocaleTimeString();
        }

        function displayWorldTime(){
            var dt = new Date();

            var output = `
                <h2 id="local">Local time: ${dt.toLocaleTimeString()}</h2>
                <table id="cities">
                    <tr>
                      <th class="col1"></th>
                      <th class="col2">City</th>
                      <th>Time</th>
                    </tr>
            `;

            for(a=0; a < cities.length; a++){
                output += `
                    <tr>
                        <td><img src="img/${cities[a].flag}"/></td>
                        <td>${cities[a].name}</td>
                        <td>${getCurrentTime(cities[a].utcOffset)}</td>
                    </tr>    
                `;
            }
            output += '</table>';
            document.getElementById("output").innerHTML = output;
        }
    </script>
</body>
</html>
